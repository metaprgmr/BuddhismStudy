<html>
<head>
<meta charset="utf-8">
<title>淨空法師開示</title>
<style>
body { font-family: KaiTi, 楷体, STKaiti, 华文楷体; line-height:120%; }
td   { font-family: KaiTi, 楷体, STKaiti, 华文楷体; line-height:120%; font-size:20px }
.subttl { font-family: "FangSong", "仿宋", STFangsong, "华文仿宋";
          font-size:14px; margin-top:-10px; margin-bottom:10px }
a { text-decoration:none }
em { font-style:normal; color:red; background-color:lightyellow }
em.edu { background-color:eef }
.toc { font-size:15px }
.info { font-family:Courier New; font-size:12px }
.ytid { font-family:Courier New; font-size:10px; opacity:0.5 }
.critical { background-color:yellow }
.good { background-color:#ffb}
</style>
<script src="../../util/utils.js"></script>
<script src="JK-teachings.js"></script>
</head>
<body style="margin:20px; background:#dfd">
<center>

<script>
var lsn, idx = get('i'), isOrig = (idx === 'orig');
if (idx == 'random') idx = JK.getRandomID();
if (!isOrig) JK.sort();
if (idx && !isOrig) { // passage display
  lsn = JK.getLesson(idx);
  w('<table width="900px">',
    '<tr><td align="center"><h2>', lsn.title, '</h2>');
  lsn.source && w('<p class="subttl">【', lsn.source, ' ', lsn.srcVol || '', '】&nbsp;&nbsp;');
  w('<font class="ytid">', lsn.ytid, '</font></p></td></tr>\n<tr><td>');
  for (var i in lsn.text) {
    var txt = lsn.text[i];
    if (!txt.startsWith('　　')) txt = '　　' + txt;
    w('<p>', txt, '</p>');
  }
  w('</td></tr>',
    '<tr><td align="center"><hr>【<a href="?i=">迴目錄</a>】', 
    '【<a href="?i=random">隨機選</a>】</td></tr></table>');
} else { // TOC
  const len = JK.getCount();
  const aTag = isOrig ? '<a href="?" title="分類">' : '<a href="?i=orig" title="原序">';
  w('<h2>', aTag, '淨空法師開示', len, (isOrig?'篇（詳細）':'篇'), '</a></h2>',
    '<p>空師法語，字字珠璣，句句精妙，實難擇分</p>',
    '<table cellpadding="0" cellspacing="0">');
  var lastType = '???';
  for (var i in JK.teachings) {
    lsn = JK.teachings[i];
    var cls = "toc";
    if (lsn.level) cls += ' ' + lsn.level;
    var type = TYPES[lsn.type] || (isOrig ? '' : '[未定]');
    if (!isOrig) { if (type !== lastType) lastType = type; else type = ''; }
    w('<tr>',
      '<td class="info" nowrap>', type || '', '</td>',
      '<td align="right" class="toc">', parseInt(i)+1, '.&nbsp;</td>',
      '<td class="', cls, '"><a href="?i=', lsn.id, '">', lsn.title, '</a></td>',
      '<td class="toc" width="20">&nbsp;</td>',
      '<td class="info" align="right">', lsn.ziCount(), '字&nbsp;&nbsp;</td>');
    if (isOrig)
      w('<td class="toc">', lsn.source || '', ' ', lsn.srcVol || '', '&nbsp;</td>',
        '<td class="ytid">', lsn.ytid || '&nbsp;', '</td>');
    w('</tr>');
  }
  w('</table>');
}
</script>

</center></body></html>
